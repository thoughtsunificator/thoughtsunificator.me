<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Creating a Github action for a Node.js 14+ project &middot; thoughtsunificator.me</title>
		<link rel="icon" type="image/jpeg" href="/favicon.ico">
		<link rel="stylesheet" type="text/css" href="/main.bundle.css">
		<link rel="canonical" href="https://thoughtsunificator.me/creating-a-github-action-for-a-nodejs-14-project/">
		<link rel="apple-touch-icon-precomposed" href="/image/apple-touch-icon-iphone-60x60.png">
		<link rel="apple-touch-icon-precomposed" sizes="60x60" href="/image/apple-touch-icon-ipad-76x76.png">
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/image/apple-touch-icon-iphone-retina-120x120.png">
		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/image/apple-touch-icon-ipad-retina-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/image/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/image/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/image/favicon-16x16.png">
		<link rel="manifest" href="/data.site.webmanifest">
		<link rel="mask-icon" href="/image/safari-pinned-tab.svg" color="#141a2d">
		<link rel="alternate" type="application/rss+xml" title="thoughtsunificator.me" href="/feed.xml" />
		<link rel="alternate" type="application/json" title="thoughtsunificator.me" href="/feed.json" />
		<link rel="search" type="application/opensearchdescription+xml" title="Search thoughtsunificator.me" href="/search.xml"/>
		<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"/>
		<link type="text/plain" rel="author" href="/humans.txt"/>
		<meta name="msapplication-TileColor" content="#141a2d">
		<meta name="theme-color" content="#353f5b">
		<meta content="Creating a Github action for a Node.js 14+ project" property="description">
		<meta content="posts, github, github-action, romain lebesle, freelanceur rennes, javascript blog, freelanceur romain lebesle, coding blog, thoughtsunificator, thoughtsunificator blog, thoughtsunificator.me" property="keywords">
		<meta content="thoughtsunificator.me" property="og:site_name">
		<meta content="Creating a Github action for a Node.js 14+ project &middot; thoughtsunificator.me" property="og:title">
		<meta content="website" property="og:type">
		<meta content="Creating a Github action for a Node.js 14+ project" property="og:description">
		<meta content="https://thoughtsunificator.me/creating-a-github-action-for-a-nodejs-14-project/" property="og:url">
		
			<meta content="Sat Sep 25 2021 02:34:06 GMT+0000 (Coordinated Universal Time)" property="article:published_time">
		
		<meta content="Guides" property="article:section">
		<meta content="posts" property="article:tag"><meta content="github" property="article:tag"><meta content="github-action" property="article:tag">
	</head>
	<body class="wrap padding page-post">
		<button id="toggle-header">Navigation</button>
		<header id="header">
			<h1>
				a boundless expression of thoughts
			</h1>
			<nav>
				<a class="" href="/">Home</a><a class="" href="/archive/">Archive</a><a class="" href="/tags/">Tags</a><a class="" href="/categories/">Categories</a><a class="" href="/about-me/">About</a>
			</nav>
		</header>
		<main id="main">
			
	<div class="post full">
		
<div class="metas">
	<time class="meta post-date" datetime="Sat Sep 25 2021 02:34:06 GMT+0000 (Coordinated Universal Time)">ðŸ“… 25 September 2021</time>
	<div class="tags">
		Categories:
		<div class="list">
			<a class="category" href="/categories/#Guides">Guides</a>
		</div>
		Tags:
		<div class="list">
			<a class="tag" href="/tags/#github">#github</a><a class="tag" href="/tags/#github-action">#github-action</a>
		</div>
	</div>
</div>

		<div>
			<h2 class="title">Creating a Github action for a Node.js 14+ project</h2>
			<div class="excerpt">
			<p>Currently it is <a href="https://github.com/actions/runner/issues/772">not possible</a> to create a <a href="https://docs.github.com/en/actions/creating-actions/creating-a-javascript-action">JavaScript action</a> with a version of nodejs other than 12.
<br><br>
Let's see if we can work this out.</p>

			</div>
		</div>
		<div id="content">
If itâ€™s not possible through JavaScript actions than maybe should we turn ourselves to a <a href="https://docs.github.com/en/actions/creating-actions/creating-a-docker-container-action">Docker container action</a>?</p>
<p>Obviously the answer is yes and I am going to work you through the process of doing it.</p>
<p>First if you donâ€™t know the basics of Github Actions I recommend you go read the <a href="https://docs.github.com/en/actions/creating-actions/about-custom-actions">Starting Guide</a>.</p>
<h3 id="action.yml" tabindex="-1">action.yml</h3>
<pre class="language-yaml"><code class="language-yaml"><span class="token comment"># See https://docs.github.com/en/actions/creating-actions/metadata-syntax-for-github-actions for more information about the action.yml syntax</span><br><span class="token punctuation">---</span><br><span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'My Action'</span><br><span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'What it does..'</span><br><span class="token key atrule">inputs</span><span class="token punctuation">:</span><br>	<span class="token key atrule">your-name</span><span class="token punctuation">:</span><br>		<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'Your name'</span><br>		<span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><br><span class="token key atrule">runs</span><span class="token punctuation">:</span><br>	<span class="token key atrule">using</span><span class="token punctuation">:</span> <span class="token string">'docker'</span><br>	<span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">'Dockerfile'</span><br></code></pre>
<h3 id="dockerfile" tabindex="-1">Dockerfile</h3>
<pre class="language-yaml"><code class="language-yaml"><span class="token comment"># This Dockerfile is inspired from the official document see https://docs.github.com/en/actions/creating-actions/creating-a-docker-container-action</span><br>FROM node<span class="token punctuation">:</span>16<span class="token punctuation">-</span>alpine <span class="token comment"># you can the version of your liking see https://hub.docker.com/_/node for more information</span><br>COPY github<span class="token punctuation">-</span>action<span class="token punctuation">-</span>src /github/github<span class="token punctuation">-</span>action<span class="token punctuation">-</span>src <span class="token comment"># we need our Github action source files to be available inside the container so let's copy them to "/github/github-action-src" for now.</span><br>COPY entrypoint.sh /entrypoint.sh<br>ENTRYPOINT <span class="token punctuation">[</span><span class="token string">"/entrypoint.sh"</span><span class="token punctuation">]</span></code></pre>
<h3 id="entrypoint.sh" tabindex="-1">entrypoint.sh</h3>
<pre class="language-yaml"><code class="language-yaml"><span class="token comment">#!/bin/sh -l</span><br><br><span class="token comment"># let's create a specific folder for the source files of our github action</span><br><br>mkdir github<span class="token punctuation">-</span>action<span class="token punctuation">-</span>src <span class="token comment"># "github/github-action-src" is the folder we put our Github Action source files into using our Dockerfile</span><br>cp <span class="token punctuation">-</span>r /github/github<span class="token punctuation">-</span>action<span class="token punctuation">-</span>src . <span class="token comment"># now let's copy that folder into the folder for the entire repository "/github/workspace"</span><br><br><span class="token comment"># as we are currently inside the github workspace (/github/workspace) containing the source files of the entire repository</span><br><span class="token comment"># we will need to cd into the folder we previously created "github-action-src"</span><br><span class="token comment"># you could also copy build files and such to "github-action-src" if you need to</span><br>cd github<span class="token punctuation">-</span>action<span class="token punctuation">-</span>src<br><br>npm install<br>node index.js</code></pre>
<p>If you have any question please send me a mail at <a href="mailto:oss@thoughtsunificator.me">oss@thoughtsunificator.me</a>.</p>
</div>
	</div>

		</main>
		<footer id="footer">
			<small style="grid-row: 1;grid-column: 1;justify-self: start;">Built using <a href="https://www.11ty.dev/">Eleventy</a></small>
			<small class="copyright">Â© Romain Lebesle</small>
			<div class="icons">
				<a title="View source code on Github" target="_blank" rel="noopener" href="https://github.com/thoughtsunificator/thoughtsunificator.me"><img alt="View source code on Github" width="32" src="/image/github.svg"></a>
			</div>
		</footer>
	</body>
</html>